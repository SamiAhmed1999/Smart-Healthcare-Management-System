<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Healthcare Management System- HIMS</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        /* A little extra style for the loading spinner */
        .spinner {
            border-top-color: #3498db;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
    <!-- Load Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-100 min-h-screen">
    <!-- Header Bar -->
    <header class="bg-white shadow-md w-full sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <img src="https://placehold.co/40x40/3B82F6/FFFFFF?text=H" alt="Logo"
                        class="w-10 h-10 rounded-full">
                    <h1 class="text-xl font-bold text-gray-800 ml-3">Smart Healthcare Management System</h1>
                </div>
                <a href="hospital_login.html"
                    class="px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition duration-300">
                    Logout
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">Welcome, Sami Ahmed!</h2>

        <!-- Admissions Chart -->
        <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Hospital Admissions (Last 7 Days)</h3>
            <div class="h-64 md:h-80"> <!-- Set a fixed height for the canvas container -->
                <canvas id="admissionsChart"></canvas>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <!-- 1. Patient & Medical Record Management -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h4a2 2 0 012 2v1M9 12h6M9 16h6">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Patient & Medical Records</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">Search, view, and manage patient records and medical histories.
                </p>
                <input type="text" placeholder="Search patient by ID or name..."
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm mb-4">
                <button
                    class="w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700">Manage
                    Records</button>
            </div>

            <!-- 2. Doctor & Appointment Management -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Doctor & Appointments</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">Schedule appointments, manage doctor availability, and view
                    rosters.</p>
                <div class="text-gray-700 mb-4">
                    <p class="text-sm"><strong>Upcoming:</strong> Dr. Smith - 10:30 AM</p>
                    <p class="text-sm"><strong>Next:</strong> Dr. Allen - 11:00 AM</p>
                </div>
                <button
                    class="w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700">View
                    Schedule</button>
            </div>

            <!-- 3. Prescription & Investigation Management -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 14h.01M12 17h.01M15 17h.01M4 7h16a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 011-1z">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Prescriptions & Labs</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">Manage medication prescriptions and review investigation/lab
                    results.</p>
                <div class="text-gray-700 mb-4">
                    <p class="text-sm"><strong>Pending Prescriptions:</strong> 12</p>
                    <p class="text-sm"><strong>Lab Results to Review:</strong> 5</p>
                </div>
                <button
                    class="w-full px-4 py-2 bg-yellow-500 text-white text-sm font-medium rounded-lg hover:bg-yellow-600">Review
                    Queue</button>
            </div>

            <!-- 4. Billing & Insurance Automation -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H7a3 3 0 00-3 3v8a3 3 0 003 3z">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Billing & Insurance</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">Automate billing cycles, process claims, and manage insurance
                    data.</p>
                <div class="text-gray-700 mb-4">
                    <p class="text-sm"><strong>Pending Claims:</strong> 34</p>
                    <p class="text-sm"><strong>Revenue Today:</strong> $45,210</p>
                </div>
                <button
                    class="w-full px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700">Open
                    Billing</button>
            </div>

            <!-- 5. AI-Powered Disease Prediction & Symptom Checker -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">AI Symptom Checker</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">Enter symptoms to get an AI-based preliminary analysis.</p>
                <textarea id="symptomInput"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm mb-2" rows="3"
                    placeholder="Enter symptoms: e.g., fever, cough, headache..."></textarea>
                <button id="analyzeButton"
                    class="w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 mb-4">Analyze
                    Symptoms</button>
                <div id="aiResult" class="text-sm text-gray-700 p-3 bg-gray-50 rounded-lg hidden">
                    <!-- AI result will appear here -->
                </div>
            </div>

            <!-- 6. AI-Based Smart Recommendations -->
            <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                <div class="flex items-center mb-4">
                    <!-- Icon -->
                    <svg class="w-8 h-8 text-pink-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800 ml-3">AI Preventive Care</h3>
                </div>
                <p class="text-gray-600 text-sm mb-4">AI-driven insights for patient preventive care and trend analysis.
                </p>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-2 mb-4">
                    <li>Flag: Patient #2041 (high BP) schedule follow-up.</li>
                    <li>Trend: 15% increase in local flu cases detected.</li>
                    <li>Suggestion: Send vaccination reminders.</li>
                </ul>
                <!DOCTYPE html>
                <html lang="en">

                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Smart Healthcare Management System- HIMS</title>
                    <!-- Load Tailwind CSS -->
                    <script src="https://cdn.tailwindcss.com"></script>
                    <style>
                        /* Custom font */
                        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

                        body {
                            font-family: 'Inter', sans-serif;
                        }

                        /* A little extra style for the loading spinner */
                        .spinner {
                            border-top-color: #3498db;
                            animation: spin 1s linear infinite;
                        }

                        @keyframes spin {
                            to {
                                transform: rotate(360deg);
                            }
                        }
                    </style>
                    <!-- Load Chart.js -->
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                </head>

                <body class="bg-gray-100 min-h-screen">
                    <!-- Header Bar -->
                    <header class="bg-white shadow-md w-full sticky top-0 z-10">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="flex justify-between items-center h-16">
                                <div class="flex items-center">
                                    <img src="https://placehold.co/40x40/3B82F6/FFFFFF?text=H" alt="Logo"
                                        class="w-10 h-10 rounded-full">
                                    <h1 class="text-xl font-bold text-gray-800 ml-3">Smart Healthcare Management System
                                    </h1>
                                </div>
                                <a href="hospital_login.html"
                                    class="px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition duration-300">
                                    Logout
                                </a>
                            </div>
                        </div>
                    </header>

                    <!-- Main Content Area -->
                    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                        <h2 class="text-3xl font-bold text-gray-800 mb-6">Welcome, Sami Ahmed!</h2>

                        <!-- Admissions Chart -->
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Hospital Admissions (Last 7 Days)</h3>
                            <div class="h-64 md:h-80"> <!-- Set a fixed height for the canvas container -->
                                <canvas id="admissionsChart"></canvas>
                            </div>
                        </div>

                        <!-- Dashboard Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                            <!-- 1. Patient & Medical Record Management -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h4a2 2 0 012 2v1M9 12h6M9 16h6">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Patient & Medical Records</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">Search, view, and manage patient records and
                                    medical histories.</p>
                                <input type="text" placeholder="Search patient by ID or name..."
                                    class="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm mb-4">
                                <button
                                    class="w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700">Manage
                                    Records</button>
                            </div>

                            <!-- 2. Doctor & Appointment Management -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Doctor & Appointments</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">Schedule appointments, manage doctor availability,
                                    and view rosters.</p>
                                <div class="text-gray-700 mb-4">
                                    <p class="text-sm"><strong>Upcoming:</strong> Dr. Smith - 10:30 AM</p>
                                    <p class="text-sm"><strong>Next:</strong> Dr. Allen - 11:00 AM</p>
                                </div>
                                <button
                                    class="w-full px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700">View
                                    Schedule</button>
                            </div>

                            <!-- 3. Prescription & Investigation Management -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-yellow-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 14h.01M12 17h.01M15 17h.01M4 7h16a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 011-1z">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Prescriptions & Labs</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">Manage medication prescriptions and review
                                    investigation/lab results.</p>
                                <div class="text-gray-700 mb-4">
                                    <p class="text-sm"><strong>Pending Prescriptions:</strong> 12</p>
                                    <p class="text-sm"><strong>Lab Results to Review:</strong> 5</p>
                                </div>
                                <button
                                    class="w-full px-4 py-2 bg-yellow-500 text-white text-sm font-medium rounded-lg hover:bg-yellow-600">Review
                                    Queue</button>
                            </div>

                            <!-- 4. Billing & Insurance Automation -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-indigo-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H7a3 3 0 00-3 3v8a3 3 0 003 3z">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">Billing & Insurance</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">Automate billing cycles, process claims, and
                                    manage insurance data.</p>
                                <div class="text-gray-700 mb-4">
                                    <p class="text-sm"><strong>Pending Claims:</strong> 34</p>
                                    <p class="text-sm"><strong>Revenue Today:</strong> $45,210</p>
                                </div>
                                <button
                                    class="w-full px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700">Open
                                    Billing</button>
                            </div>

                            <!-- 5. AI-Powered Disease Prediction & Symptom Checker -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">AI Symptom Checker</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">Enter symptoms to get an AI-based preliminary
                                    analysis.</p>
                                <textarea id="symptomInput"
                                    class="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm mb-2"
                                    rows="3" placeholder="Enter symptoms: e.g., fever, cough, headache..."></textarea>
                                <button id="analyzeButton"
                                    class="w-full px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 mb-4">Analyze
                                    Symptoms</button>
                                <div id="aiResult" class="text-sm text-gray-700 p-3 bg-gray-50 rounded-lg hidden">
                                    <!-- AI result will appear here -->
                                </div>
                            </div>

                            <!-- 6. AI-Based Smart Recommendations -->
                            <div
                                class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                                <div class="flex items-center mb-4">
                                    <!-- Icon -->
                                    <svg class="w-8 h-8 text-pink-500" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                                        </path>
                                    </svg>
                                    <h3 class="text-lg font-semibold text-gray-800 ml-3">AI Preventive Care</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-4">AI-driven insights for patient preventive care and
                                    trend analysis.</p>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-2 mb-4">
                                    <li>Flag: Patient #2041 (high BP) schedule follow-up.</li>
                                    <li>Trend: 15% increase in local flu cases detected.</li>
                                    <li>Suggestion: Send vaccination reminders.</li>
                                </ul>
                                <button
                                    class="w-full px-4 py-2 bg-pink-600 text-white text-sm font-medium rounded-lg hover:bg-pink-700">View
                                    Full Report</button>
                            </div>

                        </div>
                    </main>

                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            // --- REDIRECTION LOGIC ---

                            // 1. Patient Dashboard Redirection
                            const patientInput = document.querySelector('input[placeholder="Search patient by ID or name..."]');
                            const patientButton = patientInput.nextElementSibling; // The "Manage Records" button

                            if (patientButton) {
                                patientButton.addEventListener('click', () => {
                                    const username = patientInput.value.trim();
                                    if (username) {
                                        window.location.href = `PatientDashboard.html?username=${encodeURIComponent(username)}`;
                                    } else {
                                        alert('Please enter a patient name or ID.');
                                    }
                                });
                            }

                            // 2. Doctor Dashboard Redirection
                            // First, let's inject the input field for doctor search if it doesn't exist
                            const doctorCard = document.querySelector('.bg-white.p-6.rounded-xl.shadow-lg:nth-child(2)'); // Assuming it's the second card
                            if (doctorCard) {
                                const doctorButton = doctorCard.querySelector('button');
                                // Create input
                                const doctorInput = document.createElement('input');
                                doctorInput.type = 'text';
                                doctorInput.placeholder = 'Enter Doctor Name/ID...';
                                doctorInput.className = 'w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm mb-4';

                                // Insert input before the button
                                doctorCard.insertBefore(doctorInput, doctorButton);

                                // Update button behavior
                                doctorButton.textContent = 'Enter Dashboard';
                                doctorButton.addEventListener('click', () => {
                                    const username = doctorInput.value.trim();
                                    if (username) {
                                        window.location.href = `DoctorDashboard.html?username=${encodeURIComponent(username)}`;
                                    } else {
                                        alert('Please enter a doctor name or ID.');
                                    }
                                });
                            }


                            // --- AI SYMPTOM CHECKER SCRIPT ---
                            const analyzeButton = document.getElementById('analyzeButton');
                            const symptomInput = document.getElementById('symptomInput');
                            const aiResult = document.getElementById('aiResult');

                            if (analyzeButton) { // Check if the element exists
                                analyzeButton.addEventListener('click', function () {
                                    const symptoms = symptomInput.value;
                                    if (symptoms.trim() === '') {
                                        aiResult.textContent = 'Please enter symptoms first.';
                                        aiResult.className = 'text-sm text-red-600 p-3 bg-red-50 rounded-lg block';
                                        aiResult.classList.remove('hidden');
                                        return;
                                    }

                                    // Show loading spinner
                                    aiResult.innerHTML = `
                        <div class="flex items-center justify-center">
                            <div class="spinner w-5 h-5 rounded-full border-2 border-t-blue-500 border-gray-200"></div>
                            <span class="ml-2">Analyzing...</span>
                        </div>`;
                                    aiResult.className = 'text-sm text-gray-700 p-3 bg-gray-50 rounded-lg block';

                                    // Simulate AI processing time
                                    setTimeout(() => {
                                        // Mock AI Response
                                        let analysis = '<strong>Analysis:</strong> Based on the symptoms, there is a <strong>75% probability</strong> of seasonal influenza. Recommend PCR test. Low indication of bacterial infection.';
                                        if (symptoms.toLowerCase().includes('chest pain')) {
                                            analysis = '<strong>URGENT:</strong> Symptoms include "chest pain". <strong>High-risk flag.</strong> Recommend immediate ECG and physician consultation. Possible cardiac event.';
                                        }

                                        aiResult.innerHTML = analysis;
                                        aiResult.className = 'text-sm text-gray-800 p-3 bg-blue-50 rounded-lg block';
                                    }, 1500);
                                });
                            }

                            // --- NEW CHART SCRIPT ---
                            const ctx = document.getElementById('admissionsChart');
                            if (ctx) { // Check if the canvas element exists
                                const context = ctx.getContext('2d');

                                // Gradient for the line chart fill
                                const gradient = context.createLinearGradient(0, 0, 0, 300);
                                gradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
                                gradient.addColorStop(1, 'rgba(59, 130, 246, 0)');

                                const admissionsChart = new Chart(context, {
                                    type: 'line',
                                    data: {
                                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                                        datasets: [{
                                            label: 'Admissions',
                                            data: [12, 19, 15, 22, 18, 25, 30],
                                            borderColor: 'rgb(59, 130, 246)',
                                            backgroundColor: gradient,
                                            fill: true,
                                            tension: 0.4, // Makes the line smooth
                                            borderWidth: 2,
                                            pointBackgroundColor: 'rgb(59, 130, 246)',
                                            pointRadius: 4,
                                            pointHoverRadius: 6
                                        }]
                                    },
                                    options: {
                                        responsive: true,
                                        maintainAspectRatio: false,
                                        scales: {
                                            y: {
                                                beginAtZero: true,
                                                grid: {
                                                    color: '#e5e7eb' // Light gray grid lines
                                                }
                                            },
                                            x: {
                                                grid: {
                                                    display: false // Hide x-axis grid lines
                                                }
                                            }
                                        },
                                        plugins: {
                                            legend: {
                                                display: false // Hide the legend
                                            },
                                            tooltip: {
                                                backgroundColor: '#111827',
                                                titleFont: { size: 14 },
                                                bodyFont: { size: 12 },
                                                padding: 10,
                                                cornerRadius: 4,
                                                displayColors: false
                                            }
                                        }
                                    }
                                });
                            }
                        });
                    </script>

                </body>

                </html>